var AXloader=function(){"use strict";const e={debug:!1,loadPielineScripts:!0,searchForms:"#searchform",startDelay:1200,callbacksWait:!1,extraOffset:20,nav:"#nav-main",headerContainer:"#header",permalinks:!1,urlFragments:["wp-admin","wp-login","feed",".jpg",".png",".gif",".zip",".pdf",".mp3"],jsFragments:["var wpcf7",'{"@context"'],blacklistSelectors:[".ajax__off"],blacklist_events:[],blacklistLinks:[],reloadScripts:[],reloadContainers:["#wpadminbar"],preloadImages:!0,load_only_local_images:!0,end:function(){},start:function(){},startJS:function(){},progress:function(){},redirect:function(){},scroll:function(){}};let t={};const n={win_url:window.location,host:window.location.hostname,styles:[],scripts:[],to_scroll:!1,loading:!1},l=function(){let e=60,n=t.extraOffset,l=document.querySelector(t.headerContainer);return l&&(e=l.offsetHeight),e+=n},o=function(e,n){let l={el:e,offset:n};t.scroll(l)},i=function(e,t,n,l){e.addEventListener(t,function(e){e.target.matches(n+", "+n+" *")&&l.apply(e.target.closest(n),arguments)},!1)},r=function(e){return e.filter(function(t,n){return e.indexOf(t)===n})},s=function(e,t){return e.filter(function(e){return-1==t.indexOf(e)})},c=(e,n="")=>!0===t.debug?console.log(e,n):void 0,a={callback:null,imagesToLoad:0,get:function(e){a.callback=e&&"function"==typeof e?e:m.end,!1===t.preloadImages&&setTimeout(()=>{a.callback()},t.startDelay);let l=document.querySelectorAll("img"),o=[],i=[];for(let e=0;e<l.length;e++){let t=l[e],r=t.getAttribute("src");!1===t.classList.contains("lazy")&&null!==r&&(r.includes(n.host)?i.push(r):o.push(r))}!1===t.load_only_local_images&&(i=i.concat(o)),i=r(i),a.imagesToLoad=i,a.load(0,a.imagesToLoad.length)},load:function(e,n){0===n||e===n?(t.progress.call(100),a.finished()):a.preloadImage(a.imagesToLoad[e],function(l,o){c(o?"Number of loaded images:":"Image does not loaded:",++e);let i=e/n*80;i+=20,t.progress.call(i),a.load(e,n)})},preloadImage:function(e,t){let n=new Image;n.onload=function(){t(e,!0)},n.onerror=function(){t(e,!1)},n.src=e},finished:function(){c("All images are loaded"),a.callback()}},d={trigger:null,init:function(){d.disableAjax()},clickAction:function(e){d.trigger=this;let t=this.getAttribute("href"),i=t.split("#"),r=d.target,s=this.classList;if(!0===n.loading||"#"===t||t===n.win_url.href)return e.preventDefault(),!1;if(i&&void 0!==i[1]){let r=i[0];if(i=i[1],""===r||t===r){if(document.getElementById(i)){let e=document.getElementById(i),t=l();o(e,t)}return e.preventDefault(),!1}t=r,n.to_scroll=i}d.checkLink(t,r,s)&d.checkFragments(t,r)&&(history.pushState(null,null,t),u.init(),e.preventDefault())},redirect:function(e){c("Redirect:",e),t.redirect.call(this,e)},disableAjax:function(){for(let e of t.blacklistSelectors){let t=document.querySelectorAll(e);if(t.length>0)for(let e of t)e.classList.add("ajax__off")}},checkLink:function(e,t,l){let o="#",i="";return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)&&(i=e.split("\\").pop().split("/").pop().split(".")[0],o=new URL(e)),!l.contains("ajax__off")&&(o.host===n.win_url.host&&"_blank"!==t&&""===i&&(o.pathname!==n.win_url.pathname&&o.hash===n.win_url.hash))},checkFragments:function(e,n){let l=!0;for(let n of t.urlFragments)e.indexOf(n)>-1&&(l=!1);return l},checkExcludeLinks:function(e){let n=!1,l=e.href;for(let e of t.blacklistLinks)l.indexOf(e)>-1&&(n=!0);return n}},u={init:function(){if(!1===n.loading){n.loading=!0;let e=window.location;if(d.checkExcludeLinks(e))d.redirect(e);else{c("Start AJAX loading");let n={firstLoad:!1,trigger:d.trigger};t.callbacksWait?t.start.call(n,function(){u.load(e)}):(t.start.call(n),u.load(e)),d.trigger=!1}}},load:function(e){t.progress.call(10);let n=new XMLHttpRequest;n.responseType="document",n.onload=u.onLoad,n.addEventListener("progress",u.progress,!1),n.open("GET",e,!0),n.send()},onLoad:function(){if(200!=this.status)c("Ajax error: ",this.statusText),t.permalinks?window.location.href=t.baseUrl+"/?error=404":window.location.href=t.baseUrl+"/404";else{t.progress.call(20),c("Ajax status:",this.status);let e=document.createElement("div"),n=this.response.querySelector("html");e.innerHTML=n,f.doc=n,f.init()}},progress:function(e){if(e.lengthComputable){let t=e.loaded/e.total;c("Ajax loading progress: ",t)}else c("Ajax loading progress: ",e.loaded)}},f={doc:null,new_scripts:[],init:function(){f.setScripts(),f.clearDocumentHead()},setScripts:function(){let e=f.doc,n=document.querySelectorAll("script"),l=e.querySelectorAll("script"),o=[],i=[],r=[],c=[];for(let e of n)e.src&&i.push(e.src);for(let e of l)if(e.src&&(r.push(e.src),t.reloadScripts))for(let n of t.reloadScripts)e.src.indexOf(n)>=0&&o.push(e.src);r=s(r,i),t.reloadScripts&&t.reloadScripts.length&&(r=r.concat(o)),c=r.filter(function(e,t){return r.indexOf(e)===t}),f.new_scripts=c},clearDocumentHead:function(){f.doc.querySelector("head");let e=document.querySelector("head");n.styles=[];for(let t of e.childNodes)t.textContent.indexOf("html { margin-top: 32px !important; }")>-1&&(t.id="wp-admin-bar"),t.id&&n.styles.push(t.id);let t=e.childNodes.length;var l=1;for(let o of e.childNodes)setTimeout(function(){!1===n.styles.includes(o.id)&&e.removeChild(o),l===t&&f.addNewDocumentHead(),l++},10)},addNewDocumentHead:function(){let e=f.doc.querySelector("head"),t=document.querySelector("head"),l=e.childNodes.length;var o=1;for(let i of e.childNodes)setTimeout(function(){!1===n.styles.includes(i.id)&&t.appendChild(i),o===l&&f.body(),o++},10)},body:function(){let e=f.doc.querySelector("body"),t=e.classList;document.querySelector("body").classList=t;let n=e.querySelector("#ajax-content");document.querySelector("#ajax-content").replaceWith(n),o(0,0),f.containers()},containers:function(){let e=f.doc;for(let n of t.reloadContainers){let t=e.querySelector(n),l=document.querySelector(n);if(t&&l){let e=t.innerHTML;l.innerHTML=e}}f.navigation()},navigation:function(){if(""!==t.nav){let e=f.doc.querySelectorAll(t.nav+"  li ");for(let t of e){let e=t.id,n=t.classList,l=document.getElementById(e);l&&(l.classList=n)}}a.get(f.inlineScripts)},inlineScripts:function(){c("Init inline scripts");let e=f.doc.querySelectorAll('script[type="text/javascript"]');for(let n of e)if(!n.src){let e=!0,l=n.innerHTML;for(let n of t.jsFragments)l.indexOf(n)>=0&&(e=!1);e&&f.scriptEval(l,document)}t.startJS.call(),f.scripts()},scriptEval:function(e,t){var n=(t=t||document).createElement("script");n.text=e,c(n),t.head.appendChild(n).parentNode.removeChild(n)},scripts:function(){if(c("Number of scripts to load:",f.new_scripts.length),c("These scripts will be loaded via AJAX:",f.new_scripts),!0===t.loadPielineScripts)f.loadScripts(0,f.new_scripts.length);else{for(let e of f.new_scripts)f.loadSingleScript(e,!0,!0,function(){c("Script loaded:",e)});f.events()}},loadScripts:function(e,t){f.new_scripts.length;if(0===t||e===t)f.events();else{const n=f.new_scripts[e];f.loadSingleScript(n,!0,!0,function(){c("Loaded script nr:",e),c("Script loaded:",n),e++,f.loadScripts(e,t)})}},loadSingleScript:function(e,t=!0,n=!0,l){let o=document.createElement("script"),i=document.getElementsByTagName("script");i=i[i.length-1];let r=document.querySelector('script[src="'+e+'"]');r&&r.parentNode.removeChild(r),o.async=t,o.defer=n,o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,l())}:o.onload=function(){l()},o.src=e,document.head.appendChild(o).parentNode.removeChild(o);i.parentNode},events:function(){c("Remove old events"),m.end()}},p={get:function(){let e=document.querySelectorAll(t.searchForms);for(let t of e)if(!1===t.classList.contains("has-listener")){t.classList.add("has-listener"),t.addEventListener("submit",p.submit);let e=t.querySelector('input[type="submit"]');e&&e.addEventListener("click",p.submit),t.querySelector("#s").onkeydown=p.enterKey}},enterKey:function(e){13===e.keyCode&&p.submit},submit:function(e){let n=this.querySelector("#s");if(n&&(n=n.value)){let e="?s="+n,l=t.baseUrl+e;history.pushState(null,null,l),u.init()}e.preventDefault()}},g=function(e){c("History action"),u.init()},m={start:function(){c("First Start: ",Date()),n.loading=!0,i(document,"click","a[href]",d.clickAction);let e={firstLoad:!0};t.callbacksWait?t.start.call(e,function(){a.get(m.end)}):(t.start.call(e),a.get(m.end))},end:function(){if(c("Loading finished"),n.loading=!1,d.init(),p.get(),n.to_scroll){c("Scroll content");let e=n.to_scroll;if(document.getElementById(e)){let t=document.getElementById(e),i=l();o(t,i),n.to_scroll=!1}}t.callbacksWait?t.end.call(this,function(){}):t.end.call(this)}};return{init:function(n){t=Object.assign({},e,n);let l=["blacklistSelectors","reloadContainers","reloadScripts","blacklist_events","blacklistLinks","jsFragments"];for(let e of l)!1===Array.isArray(t[e])&&""!==t[e]&&(t[e]=t[e].split(","));window.addEventListener("popstate",g),m.start()}}}();